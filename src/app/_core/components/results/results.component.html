<ng-container *ngIf="viewModel$ | async as vm">
  <!-- Expansion Panel for Parsed Results -->
  <app-expansion-panel title="Parsed Results">
    <pre class="mt-4 p-4 text-black rounded-md">
      {{ vm.customVariables | json }}
    </pre>
  </app-expansion-panel>

  <!-- Form for Exporting -->
  <form [formGroup]="vm.cssForm" (ngSubmit)="exportToFile()" *ngIf="vm.cssForm">
    <div class="mt-4 flex justify-end gap-4 sticky-bar">
      <!-- Copy to Clipboard Button -->
      <button
        id="copyToClipboard"
        type="button"
        (click)="copyToClipboard()"
        class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition"
      >
        Copy to Clipboard
      </button>

      <!-- Process Next Item Button -->
      <button
        id="processNextItem"
        type="button"
        (click)="processNextItem()"
        class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition"
        *ngIf="vm.jsonItemCount && vm.currentItemIndex < vm.jsonItemCount - 1"
      >
        Process Next Item
      </button>

      <!-- Export to File Button -->
      <button
        id="exportToFile"
        type="submit"
        class="bg-red-500 text-white active:bg-red-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150"
      >
        Export to File
      </button>
    </div>
  </form>
</ng-container>
