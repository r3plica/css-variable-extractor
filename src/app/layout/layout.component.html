<div class="min-h-screen bg-purple-500 text-white flex flex-col">
  <!-- Header -->
  <header class="p-4 bg-purple-700 shadow">
    <h1 class="text-xl font-bold">CSS Variable Extractor</h1>
  </header>

  <!-- Tabs -->
  <div class="flex bg-purple-600">
    <button
      (click)="switchTab('cssInput')"
      class="flex-1 p-4 text-center"
      [class.bg-purple-700]="activeTab === 'cssInput'"
      [class.opacity-50]="activeTab !== 'cssInput'"
    >
      CSS to Parse
    </button>
    <button
      (click)="switchTab('export')"
      class="flex-1 p-4 text-center"
      [class.bg-purple-700]="activeTab === 'export'"
      [class.opacity-50]="!resultsAvailable || activeTab !== 'export'"
      [disabled]="!readyForExport"
    >
      Variables to extract
    </button>
    <button
      (click)="switchTab('results')"
      class="flex-1 p-4 text-center"
      [class.bg-purple-700]="activeTab === 'results'"
      [class.opacity-50]="!resultsAvailable || activeTab !== 'results'"
      [disabled]="!resultsAvailable"
    >
      Results
    </button>
  </div>

  <!-- Main Content -->
  <main class="flex-1 p-6">
    <!-- CSS Input Tab -->
    <div *ngIf="activeTab === 'cssInput'">
      <h2 class="text-lg font-semibold">
        Welcome to my CSS Variable Extractor Tool
      </h2>
      <p class="mt-2">
        To use it, simply add your CSS and click "Parse" to get your output.
      </p>
      <form [formGroup]="cssForm" (ngSubmit)="parseCss()" class="mt-4">
        <textarea
          formControlName="cssInput"
          class="w-full h-64 p-4 text-black rounded-md focus:outline-none"
          placeholder="Paste your CSS here..."
        ></textarea>
        <div class="mt-4 flex justify-end gap-4">
          <label class="flex items-center">
            <input
              type="checkbox"
              formControlName="mergeDuplicates"
              class="mr-2"
            />
            Merge Duplicates
          </label>
          <button
            type="button"
            (click)="clearInput()"
            class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md"
          >
            Clear
          </button>
          <button
            type="submit"
            class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md"
          >
            Parse
          </button>
        </div>
      </form>
    </div>

    <!-- Export Tab -->
    <div *ngIf="activeTab === 'export'">
      <h2 class="text-lg font-semibold">Export Variables</h2>
      <form
        [formGroup]="exportForm"
        (ngSubmit)="exportVariables()"
        class="mt-4"
      >
        <div
          *ngFor="let variable of extractedVariables; let i = index"
          class="flex items-center mb-2"
        >
          <input
            type="checkbox"
            [formControlName]="'export-' + i"
            class="mr-2"
          />
          <input
            type="text"
            [formControlName]="'name-' + i"
            class="flex-1 p-2 text-black rounded-md"
          />
        </div>
        <div class="mt-4 flex justify-end gap-4">
          <button
            type="submit"
            class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md"
          >
            Export Selected
          </button>
        </div>
      </form>
    </div>

    <!-- Results Tab -->
    <div *ngIf="activeTab === 'results'">
      <h2 class="text-lg font-semibold">Parsed Results</h2>
      <pre class="mt-4 p-4 bg-purple-200 text-black rounded-md"
        >{{ customVariables | json }}
      </pre>
      <div class="mt-4 flex justify-end gap-4">
        <button
          type="submit"
          class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md"
        >
          Export
        </button>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="p-4 bg-purple-800 text-center">
    &copy; 2024 r3plica ltd.
  </footer>
</div>
